# py_wtp_bus
Data is downloaded from https://api.um.warszawa.pl/#. This is the API of Warsaw Public Transport.
Scripts included in this project:
- get_bus_pos.py: gets actual position of buses
- get_timetable.py: gets buses' timetable
- analize.py: analyzes data got from 2 scripts above

# Files included in this project
`timetable.json` was generated by `python3 get_timetable.py timetable` (Note: it takes a lot of time to generate this file)<br />
In `busposition` there are data downloaded by `python3 get_bus_pos.py pos_21_ 60` (folder 2024-02-12, generated that day at 21:30) and `python3 get_bus_pos.py 2021-02-15_ 60` (folder 2024-02-15, generated that day at 7:30). Arguments passed are: where to save files and how many files to generate. Each file is buses' position each 70s <br /><br />
Files speedmap07.html and latestats07.html were generated by `python3 analize.py busposition/2024-02-15/2024-02-15_ 60 timetable speedmap07 latestats07`<br />
Files speedmap21.html and latestats21.html were generated by `python3 analize.py busposition/2024-02-12/pos_21_ 60 timetable speedmap21 latestats21`<br />
These commands take about 30s to run and give more information, for example: 
- Begin time: 2024-02-15 07:30:50
- Top 3 lines with most late buses: ('189', 525), ('523', 365), ('509', 353)
- Most buses arrived late at stop Spacerowa-52, 42 late on 42
- Buses arrived late 20779 on 32597, 63.75%
- Buses exceeded speed limit of 50km/h: 399
- For futher information see speedmap07.html
- About all late bus arrivals see latestats07.json
- End time: 2024-02-15 08:29:52

`speedmap.html`: interactive maps where you can see where buses exceeded speed 50km/h (You can click on every tag to see more details)<br />
`latestats.json`: all stops with late arrivals and all arrivals listed

# Note
Bus position input files to `analyze.py` should be within 1 day and should not be at night hours.




